flows:
  research_symptoms:
    description: Help users to find information about the symptoms their baby has.
    steps:
      - collect: symptoms
      - action: run_internet_search
      - action: utter_ask_search_doctor_answer
      - collect: search_doctor_answer
        next:
          - if: slots.search_doctor_answer = "yes" or slots.search_doctor_answer = "ok"
            then: 
              - call: book_doctor_appointment
                next: END
          - else: 
              - action: utter_free_chitchat_response
                next: END

  get_baby_data:
    description: Show data from the Baby App the user is using regarding food intake, digestion, sleep and other facts.
    steps:
      - collect: baby_data_request
      - action: action_get_baby_data_response
        next: END
  
  find_best_product:
    description: The users wants to buy a baby related product and you need to help find this product on Amazon.
    steps:
      - collect: searched_product
      - collect: retailer 
      - action: action_get_product_response 
        next: END
      

  find_nanny:
    description: Help users to find a nanny or babysitter service. 
    steps:
      - collect: nanny_date 
      - collect: nanny_time
      - collect: nanny_hours
      - action: check_nannys_available

  book_doctor_appointment:
    description: Help users to find a doctor appointment for their baby/child.
    nlu_trigger:
      - intent:
          name: doctor_neeeded
          confidence_threshold: 0.7
    steps: 
      - collect: doctor_location
        description: "The user's current city"
      #- action: action_check_valid_location
        #next:
        #- if: slots.location_is_valid
        #  then:
         #   - set_slots: doctor_location
      - action: action_get_available_doctors
        next: END
     # - collect: utter_ask_which_doctor_to_pick

  get_youtube_video_summary:
    description: Help users to find youtube videos on relevant topic regarding pregnancy, birth, baby products etc. and to summarize the content of the videos.
    steps:
      - action: utter_ask_video_content
      - collect: video_content
      - action: action_find_youtube_videos
      - action: utter_ask_summary_required
      - collect: summary_required
        next:
          - if: slots.summary_required = "yes" or slots.summary_required = "ok"
            then: 
              - action: action_summarize_youtube_video
                next: END
          - else: 
              - action: utter_free_chitchat_response
                next: END

  pattern_search:
    description: Handle knowledge-based questions.
    steps:
      - action: action_trigger_search